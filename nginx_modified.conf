worker_processes auto;
http {
    keepalive_timeout 120;
    upstream backend {
        server 192.168.1.10:8080 max_fails=3 weight=5;
        server 192.168.1.11:8080 weight=2;
    }
    upstream api_backend {
        server 10.0.1.1:9000;
        server 10.0.1.2:9000;
    }
    gzip on;
    server {
        listen 80;
        server_name example.com;
        location / {
            proxy_pass http://backend;
        }
        location /health {
            return 200 "OK";
        }
    }
}